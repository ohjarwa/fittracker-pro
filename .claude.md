# FitTracker Pro 项目上下文

> 智能健身训练管理系统 - 记录 → 分析 → 规划 → 自适应

## ⚠️ 重要提示

**每次处理任务前，请务必先阅读 [progress.md](progress.md) 了解：**
- 已解决的问题和解决方案
- 核心知识点和最佳实践
- 开发环境配置
- 待解决问题列表

---

## 项目概述

面向健身爱好者的智能训练管理系统，核心功能：
- 训练记录（动作库、组数、重量、RPE）
- 1RM 推算与趋势分析（多公式加权 + RPE 修正）
- 智能训练计划生成（周期化策略）
- 生理数据整合与自适应调整

## 技术栈

### 后端
- **框架**: FastAPI (Python)
- **数据库**: PostgreSQL + SQLAlchemy ORM
- **认证**: JWT
- **迁移**: Alembic

### 前端
- **框架**: Vue 3.4+ (Composition API + `<script setup>`)
- **语言**: TypeScript 5.0+
- **构建**: Vite 5.0+
- **样式**: Tailwind CSS 3.4+
- **状态管理**: Pinia
- **路由**: Vue Router
- **图表**: ECharts
- **HTTP**: Axios

## 目录结构

```
FitTracker Pro/
├── backend/                 # FastAPI 后端
│   ├── app/
│   │   ├── main.py         # 入口
│   │   ├── models/         # SQLAlchemy 模型
│   │   ├── routers/        # API 路由
│   │   ├── schemas/        # Pydantic 模型
│   │   └── services/       # 业务逻辑
│   ├── migrations/         # Alembic 迁移
│   └── seeds/              # 初始数据
├── frontend/               # Vue 3 前端
│   ├── src/
│   │   ├── core/           # 基础设施（API、路由、状态）
│   │   ├── shared/         # 共享组件
│   │   └── modules/        # 业务模块
│   │       ├── workout/    # 训练记录
│   │       ├── exercise/   # 动作库
│   │       ├── analysis/   # 数据分析
│   │       └── auth/       # 用户认证
│   └── vite.config.ts
├── FitTracker_开发设计方案.md   # 详细设计文档
├── 前端技术架构.md              # 前端架构文档
└── 三窗口任务清单.md            # 开发任务清单
```

## 核心数据模型

- **User**: 用户信息（邮箱、昵称、体重、身高）
- **Exercise**: 动作库（名称、肌群、分类、器械）
- **WorkoutSession**: 训练 session（日期、时长、备注）
- **WorkoutSet**: 训练组（动作、重量、次数、RPE）
- **Estimated1RM**: 1RM 推算记录

## API 路由概览

```
认证:     POST /api/auth/login, /register, /refresh
训练:     GET/POST /api/workouts, /api/workouts/{id}
动作:     GET /api/exercises, /api/exercises/{id}
分析:     GET /api/analysis/1rm/{exercise_id}, /volume, /muscle-balance
```

## 开发阶段

1. **Phase 1 (MVP)**: 训练记录 + 1RM 分析 + 基础可视化
2. **Phase 2**: 智能计划生成 + 周期化策略
3. **Phase 3**: 生理数据整合 + 自适应调整
4. **Phase 4**: AI 增强 + 社交功能

## 运行命令

```bash
# 后端
cd backend
python -m venv venv && source venv/bin/activate
pip install -r requirements.txt
alembic upgrade head
uvicorn app.main:app --reload

# 前端
cd frontend
npm install
npm run dev
```

## 可用 MCP 工具

### 1. Chrome DevTools MCP (浏览器自动化)

| 工具 | 功能 |
|-----|------|
| `click` | 点击元素 |
| `hover` | 悬停在元素上 |
| `fill` / `fill_form` | 填充表单 |
| `press_key` | 按键/快捷键 |
| `drag` | 拖拽元素 |
| `upload_file` | 上传文件 |
| `navigate_page` | 导航/刷新页面 |
| `new_page` / `close_page` | 新建/关闭页面 |
| `take_snapshot` / `take_screenshot` | 获取快照/截图 |
| `evaluate_script` | 执行 JavaScript |
| `emulate` | 模拟设备/网络/主题 |
| `list_network_requests` | 列出网络请求 |
| `list_console_messages` | 列出控制台消息 |
| `performance_start_trace` | 性能追踪 |

**前置条件**: 需要启动 Chrome 远程调试模式

### 2. Z-AI MCP (智能图像/视频分析)

| 工具 | 功能 |
|-----|------|
| `analyze_image` | 通用图片分析 |
| `analyze_video` | 视频内容分析 |
| `extract_text_from_screenshot` | 截图 OCR 文字提取 |
| `diagnose_error_screenshot` | 错误截图诊断 |
| `ui_to_artifact` | UI 转 Code/Spec/Prompt |
| `ui_diff_check` | UI 对比检查 |
| `analyze_data_visualization` | 数据可视化分析 |
| `understand_technical_diagram` | 技术图表理解 |

### 3. Web Reader (网页读取)

| 工具 | 功能 |
|-----|------|
| `webReader` | 抓取网页内容，转换为 Markdown |

### 4. Web Search (网络搜索)

| 工具 | 功能 |
|-----|------|
| `webSearch` | 网络搜索获取最新信息 |

### 5. Zread (智谱文档阅读)

智谱 AI 提供的文档阅读能力

### 使用示例

```bash
# 网页读取
webReader(url="https://example.com", return_format="markdown")

# 图片分析
analyze_image(image_source="https://example.com/image.png", prompt="描述图片内容")

# Chrome 自动化
new_page(url="https://github.com")
take_screenshot()

# 视频分析
analyze_video(video_source="https://example.com/video.mp4", prompt="总结视频内容")
```

## 可用 Skills

| Skill | 功能 |
|-------|------|
| `-21risk-automation` | 21risk 自动化 (Rube MCP/Composio) |
| `-2chat-automation` | 2chat 自动化 (Rube MCP/Composio) |

## 代码规范

### 前端 (Vue)
- 组件使用 `<script setup lang="ts">`
- Props 使用 TypeScript 接口定义
- 文件命名: 组件 PascalCase，其他 camelCase

### 后端 (Python)
- 使用 Pydantic 进行数据验证
- 路由使用 APIRouter 模块化
- 遵循 PEP 8 规范

## 详细文档

- [FitTracker_开发设计方案.md](FitTracker_开发设计方案.md) - 完整设计文档
- [前端技术架构.md](前端技术架构.md) - 前端架构详情
- [三窗口任务清单.md](三窗口任务清单.md) - 并行开发任务分配
